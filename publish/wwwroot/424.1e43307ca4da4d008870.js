"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[424],{9424:(U,u,s)=>{s.r(u),s.d(u,{AccountModule:()=>O});var l=s(8583),m=s(15),e=s(665),t=s(3018),g=s(4878),c=s(4015);let f=(()=>{class n{constructor(o,i,a){this.accountService=o,this.router=i,this.route=a}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/shop",this.createLoginForm()}createLoginForm(){this.loginForm=new e.cw({email:new e.NI("",[e.kI.required,e.kI.pattern("^\\w+[\\w-\\.]*\\@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$")]),password:new e.NI("",e.kI.required)})}onSubmit(){this.accountService.login(this.loginForm.value).subscribe(()=>{this.router.navigateByUrl(this.returnUrl)},o=>{console.log(o)})}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(g.B),t.Y36(m.F0),t.Y36(m.gz))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-login"]],decls:7,vars:5,consts:[[1,"form-signin","mt-5",3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal","text-center"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"]],template:function(o,i){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(1,"h1",1),t._uU(2,"Login"),t.qZA(),t._UZ(3,"app-text-input",2),t._UZ(4,"app-text-input",3),t.TgZ(5,"button",4),t._uU(6," Sign in "),t.qZA(),t.qZA()),2&o&&(t.Q6J("formGroup",i.loginForm),t.xp6(3),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("disabled",i.loginForm.invalid))},directives:[e._Y,e.JL,e.sg,c.t,e.JJ,e.u],styles:[".form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})();var b=s(7574),h=s(3637),C=s(9796);function p(n){return!(0,C.k)(n)&&n-parseFloat(n)+1>=0}var d=s(4869);function v(n){const{index:r,period:o,subscriber:i}=n;if(i.next(r),!i.closed){if(-1===o)return i.complete();n.index=r+1,this.schedule(n,o)}}var y=s(5917),w=s(3190),M=s(8002);function F(n,r){if(1&n&&(t.TgZ(0,"li"),t._uU(1),t.qZA()),2&n){const o=r.$implicit;t.xp6(1),t.hij(" ",o," ")}}function P(n,r){if(1&n&&(t.TgZ(0,"ul",7),t.YNc(1,F,2,1,"li",8),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.errors)}}const J=[{path:"login",component:f},{path:"register",component:(()=>{class n{constructor(o,i,a){this.fb=o,this.accountService=i,this.router=a}ngOnInit(){this.createRegisterForm()}createRegisterForm(){this.registerForm=this.fb.group({displayName:[null,[e.kI.required]],email:[null,[e.kI.required,e.kI.pattern("^\\w+[\\w-\\.]*\\@\\w+((-\\w+)|(\\w*))\\.[a-z]{2,3}$")],[this.validateEmailNotTaken()]],password:[null,[e.kI.required]]})}onSubmit(){this.accountService.register(this.registerForm.value).subscribe(()=>{this.router.navigateByUrl("/shop")},o=>{console.log(o),this.errors=o.errors})}validateEmailNotTaken(){return o=>function(n=0,r,o){let i=-1;return p(r)?i=Number(r)<1?1:Number(r):(0,d.K)(r)&&(o=r),(0,d.K)(o)||(o=h.P),new b.y(a=>{const N=p(n)?n:+n-o.now();return o.schedule(v,N,{index:0,period:i,subscriber:a})})}(500).pipe((0,w.w)(()=>o.value?this.accountService.checkEmailExists(o.value).pipe((0,M.U)(i=>i?{emailExists:!0}:null)):(0,y.of)(null)))}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(e.qu),t.Y36(g.B),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-register"]],decls:9,vars:7,consts:[[1,"form-signin","mt-5",3,"formGroup","ngSubmit"],[1,"h3","mb-3","fw-normal","text-center"],["formControlName","displayName",3,"label"],["formControlName","email",3,"label"],["formControlName","password",3,"label","type"],["class","text-danger list-unstyled",4,"ngIf"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"],[1,"text-danger","list-unstyled"],[4,"ngFor","ngForOf"]],template:function(o,i){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(1,"h1",1),t._uU(2,"Register"),t.qZA(),t._UZ(3,"app-text-input",2),t._UZ(4,"app-text-input",3),t._UZ(5,"app-text-input",4),t.YNc(6,P,2,1,"ul",5),t.TgZ(7,"button",6),t._uU(8," Register "),t.qZA(),t.qZA()),2&o&&(t.Q6J("formGroup",i.registerForm),t.xp6(3),t.Q6J("label","Display Name"),t.xp6(1),t.Q6J("label","Email Address"),t.xp6(1),t.Q6J("label","Password")("type","password"),t.xp6(1),t.Q6J("ngIf",i.errors),t.xp6(1),t.Q6J("disabled",i.registerForm.invalid))},directives:[e._Y,e.JL,e.sg,c.t,e.JJ,e.u,l.O5,l.sg],styles:[".form-signin[_ngcontent-%COMP%]{width:100%;max-width:330px;padding:15px;margin:auto}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-right-radius:0;border-bottom-left-radius:0}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{margin-bottom:10px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})()}];let Z=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(J)],m.Bz]}),n})();var A=s(4466);let O=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[l.ez,Z,A.m]]}),n})()}}]);